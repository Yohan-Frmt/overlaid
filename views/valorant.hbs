<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Dashboard</title>
</head>

<body id="page-top">
    <div id="wrapper">
      {{>sidebar}}
        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <!-- Topbar -->
                <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">
                  <div class='d-none d-sm-inline-block form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search'>
                    <h2>Valorant</h2>
                  </div>
                </nav>
                <!-- End of Topbar -->

                <!-- Begin Page Content -->
                <div class="container-fluid">

                    <div class="row">

                        <!-- Area Chart -->
                      <div class="col-xl-12 col-lg-12">
                        <div class="card shadow mb-0">
                          <!-- Card Header - Dropdown -->
                          <div
                            class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                            <h6 class="m-0 font-weight-bold text-primary">Maps</h6>
                          </div>
                          <!-- Card Body -->
                          <div class="card-body">
                            <div class="chart-area">
                              <div class="row justify-content-center">
                                <div class="d-flex flex-wrap justify-content-around">
                                  {{#each maps}}
                                        <div class='pr-1'><img src='{{this.image}}' alt='{{this.name}}' height='180px'></div>
                                  {{/each}}
                                </div>
                              </div>
                              <div class="row justify-content-center">
                                <div class="col-lg-4 col-md-6 col-sm-12">
                                  <div class="form-group"><label for="map">Map Name</label><input type="text" class="form-control" id="map" placeholder="Type something"/> </div>
                                </div>
                              </div>
                              <div class="row justify-content-center">
                                <div class="col-md-6 col-lg-4 col-12">
                                  <div class="form-group files"><label class="my-auto">Image </label> <input id="mapImage" type="file" class="form-control" /></div>
                                  <button type='submit'>Submit</button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-xl-12 col-lg-12">
                        <div class="card shadow mb-0">
                          <!-- Card Header - Dropdown -->
                          <div
                            class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                            <h6 class="m-0 font-weight-bold text-primary">Characters</h6>
                          </div>
                          <!-- Card Body -->
                          <div class="card-body">
                            <div class="chart-area">

                              <div class="row justify-content-center">
                                <div class="d-flex flex-wrap justify-content-around" id='charactersList'>
                                  {{#each characters}}
                                    <div class='pr-1'><img src='{{this.image}}' alt='{{this.name}}' height='180px'></div>
                                  {{/each}}
                                </div>
                              </div>
                              <div class="row justify-content-center">
                                <div class="col-lg-4 col-md-6 col-sm-12">
                                  <div class="form-group"><label for="character">Character Name</label><input type="text" class="form-control" id="character" placeholder="Type something"> </div>
                                </div>
                              </div>
                              <div class="row justify-content-center">
                                <div class="col-md-6 col-lg-4 col-12">
                                  <div class="form-group files"><label class="my-auto">Image </label> <input id="characterImage" type="file" class="form-control" /></div>
                                  <button type='submit' id='submitCharacter'>Submit</button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                </div>
                <!-- /.container-fluid -->

            </div>
            <!-- End of Main Content -->

            <!-- Footer -->
            <footer class="sticky-footer bg-white">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Copyright &copy;</span>
                    </div>
                </div>
            </footer>
            <!-- End of Footer -->

        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>
    <script>
      const sCEl = document.querySelector('#submitCharacter')
      sCEl.addEventListener('click', (ev) => {
        ev.preventDefault()
        const [name, image] = [
          document.querySelector('#character'),
          document.querySelector('#characterImage'),
        ]

        const fd = new FormData()
        fd.append('image', image.files[0])
        fd.append('name', name.value)
        fd.append('type', 'character')

        fetch('valorant', { method: "POST", body: fd })
          .then(data => data.json())
        .then(({ data }) => {
          if (!data.status) return
          const divEl = document.createElement("div")
          divEl.classList.add('pr-1')
          const imgEl = document.createElement("img")
          imgEl.src = data.image
          imgEl.alt = data.name
          imgEl.style.height = '180px'
          divEl.appendChild(imgEl)
          document.querySelector('#charactersList').appendChild(divEl)
        })
      })
    </script>
</body>
</html>
